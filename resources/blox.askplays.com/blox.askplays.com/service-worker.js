const CACHE_NAME="static-v1",OFFLINE_URL="/index.html";self.addEventListener("install",function(e){console.log("[ServiceWorker] Install"),e.waitUntil((async()=>{const e=await caches.open(CACHE_NAME);await e.addAll(["/","/index.html","/style.css","/js/layout.js","/js/basic.js","/js/AskGame.js","/js/script.js","/js/block.js","/js/piece.js","/js/opener.js","/js/computer.js","/js/replay.js","/js/computerWorker.js","/js/pcfinder.js","/js/account.js","/js/webgl.js","/js/rubbable.js","/js/libgif.js","/?source=pwa","/?mode=0","/?opener=","/map-maker","/js/map-maker.js","/js/lz-string.js","/js/base64-string.js","/replay/index.html","/replay/sketch.js","/profile","/stats","/times","/about/","/about/about.css","/about/patchnotes/","/about/patchnotes/patchnotes.css","/about/api/","/account/","/guide/","/res/audio/sonar0.mp3","/res/audio/sonar1.mp3","/res/audio/sonar2.mp3","/res/audio/sonar3.mp3","/res/audio/sonar4.mp3","/res/audio/sonar5.mp3","/res/audio/sonar6.mp3","/res/audio/sonar7.mp3","/res/audio/sonar8.mp3","/Roboto-Regular.ttf","/res/PWA/icons-192.png","/res/PWA/screenshot1.png","/res/icons/settings-icon.svg","/res/icons/chat-icon.svg","/res/icons/insert_emoticon-icon.svg","/res/icons/group-icon.svg","/res/icons/star-icon.svg"])})()),self.skipWaiting()}),self.addEventListener("activate",e=>{console.log("[ServiceWorker] Activate"),e.waitUntil((async()=>{"navigationPreload"in self.registration&&await self.registration.navigationPreload.enable()})()),self.clients.claim()}),self.addEventListener("fetch",function(n){n.request.url.startsWith(self.location.origin)&&n.respondWith((async()=>{try{var e=await n.preloadResponse;return e?e:caches.open(CACHE_NAME).then(function(s){return fetch(n.request).then(function(e){if(206!=e.status&&"POST"!=n.request.method&&s.put(n.request,e.clone()).catch(console.error),e.ok)return e;{let e=n.request;return e.url.match(/\?/)&&(e=n.request.url.replace(/\?.*/,"")),s.match(e).then(function(e){return e})}}).catch(function(e){let t=n.request;return t.url.match(/\?/)&&(t=n.request.url.replace(/\?.*/,"")),s.match(t).then(function(e){return e})})})}catch(e){console.log("[Service Worker] Fetch failed; returning offline page instead.",e)}return caches.open(CACHE_NAME).then(function(t){let e=n.request;return e.url.match(/\?/)&&(e=n.request.url.replace(/\?.*/,"")),t.match(e).then(function(e){return e||fetch(n.request).then(function(e){try{t.put(n.request,e.clone())}catch(e){console.log("[Service Worker] Cache Put failed; ",e)}return e})})})})())}),self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return e!=CACHE_NAME}).map(function(e){return caches.delete(e)}))}))});